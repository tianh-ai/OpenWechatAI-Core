# OpenWechatAI Core

<div align="center">

![Version](https://img.shields.io/badge/version-1.0.0-blue)
![Python](https://img.shields.io/badge/python-3.12+-green)
![License](https://img.shields.io/badge/license-MIT-orange)
![Status](https://img.shields.io/badge/status-stable-brightgreen)
![Android](https://img.shields.io/badge/android-15%20ready-brightgreen)
![Enterprise](https://img.shields.io/badge/enterprise-WeWork%20%7C%20Feishu%20%7C%20DingTalk-orange)

**ğŸ¤– æ™ºèƒ½é€šä¿¡è‡ªåŠ¨åŒ–å¹³å° - æ”¯æŒä¸ªäººå¾®ä¿¡ + ä¼ä¸šé€šä¿¡ï¼ˆä¼ä¸šå¾®ä¿¡/é£ä¹¦/é’‰é’‰ï¼‰çš„AIé©±åŠ¨æ¶ˆæ¯å¤„ç†ç³»ç»Ÿ**

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) Â· [ä¼ä¸šé€šä¿¡MCP](#-ä¼ä¸šé€šä¿¡mcp) Â· [æ‰‹æœºé…ç½®](docs/PHONE_SETUP.md) Â· [å¾®ä¿¡è‡ªåŠ¨åŒ–](docs/WECHAT_AUTOMATION.md)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹
OpenWechatAI-Core æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ™ºèƒ½é€šä¿¡è‡ªåŠ¨åŒ–å¹³å°ï¼Œæä¾›**ä¸¤ç§è§£å†³æ–¹æ¡ˆ**ï¼š

1. **ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ–** - é€šè¿‡Androidæ‰‹æœºå®ç°å¾®ä¿¡æ¶ˆæ¯çš„è‡ªåŠ¨æ£€æµ‹ã€OCRè¯†åˆ«å’Œæ™ºèƒ½å›å¤
2. **ä¼ä¸šé€šä¿¡MCP** â­ **NEW** - åŸºäºå®˜æ–¹APIçš„ä¼ä¸šå¾®ä¿¡ã€é£ä¹¦ã€é’‰é’‰ç»Ÿä¸€ç®¡ç†å¹³å°

### âœ¨ æ ¸å¿ƒç‰¹æ€§

#### ğŸ“± ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ–ï¼ˆæ‰‹æœºæ–¹æ¡ˆï¼‰
- ğŸ¯ **æ··åˆè‡ªåŠ¨åŒ–**: åæ ‡ç‚¹å‡» + OCRè¯†åˆ« + å›¾åƒå¯¹æ¯”
- ğŸ“± **Android 15å…¼å®¹**: å®Œç¾æ”¯æŒæœ€æ–°ç³»ç»Ÿ
- ğŸ” **OCRè¯†åˆ«**: Dockerå®¹å™¨åŒ–PaddleOCRï¼Œé«˜å‡†ç¡®ç‡
- ğŸ“Š **æ¶ˆæ¯ç›‘æ§**: å®æ—¶æ£€æµ‹æ–°æ¶ˆæ¯å¹¶è‡ªåŠ¨è¿›å…¥èŠå¤©
- ğŸ¤– **è§„åˆ™å¼•æ“**: åŸºäºYAMLçš„çµæ´»å›å¤è§„åˆ™
- ğŸ“¸ **å®Œæ•´æ—¥å¿—**: æˆªå›¾å­˜æ¡£å’Œæ“ä½œè®°å½•

#### ğŸ¢ ä¼ä¸šé€šä¿¡MCPï¼ˆAPIæ–¹æ¡ˆï¼‰â­ **æ¨è**
- âœ… **å®Œå…¨ä¸éœ€è¦æ‰‹æœº** - çº¯APIæ–¹å¼ï¼Œç¨³å®šå¯é 
- ğŸ¯ **ä¸‰å¤§å¹³å°æ”¯æŒ** - ä¼ä¸šå¾®ä¿¡ã€é£ä¹¦ã€é’‰é’‰ç»Ÿä¸€ç®¡ç†
- ğŸŒ **Webé…ç½®ç•Œé¢** - å¯è§†åŒ–é…ç½®ï¼Œç®€å•æ˜“ç”¨
- ğŸ“¡ **ç»Ÿä¸€æ¶ˆæ¯æ¥å£** - ä¸€å¥—APIç®¡ç†æ‰€æœ‰å¹³å°
- ğŸ¤– **è‡ªåŠ¨å›å¤** - åŸºäºè§„åˆ™å¼•æ“çš„æ™ºèƒ½å›å¤
- ğŸ”Œ **åŒæ¨¡å¼æ”¯æŒ** - Webhookç¾¤æœºå™¨äºº + ä¼ä¸šåº”ç”¨
- ğŸ“Š **100%å‡†ç¡®ç‡** - å®˜æ–¹APIï¼Œæ¶ˆæ¯è¯†åˆ«å‡†ç¡®
- ğŸš€ **å¿«é€Ÿéƒ¨ç½²** - 5åˆ†é’Ÿå®Œæˆé…ç½®å’Œæµ‹è¯•Iå’Œç®¡ç†åå°
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**: å®Œæ•´çš„Dockerå’ŒKubernetesæ”¯æŒ

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è§„åˆ™å±‚ (Rules)                          â”‚
â”‚          YAMLé…ç½® + è§„åˆ™å¼•æ“ + åŠ¨æ€çƒ­åŠ è½½                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     é€»è¾‘å±‚ (Logic)                           â”‚
â”‚    äº‹ä»¶è°ƒåº¦ + AIå†³ç­– + æ’ä»¶ç®¡ç† + ä¸Šä¸‹æ–‡ç®¡ç†                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æŠ€èƒ½å±‚ (Skills)                           â”‚
â”‚      æ’ä»¶åŒ–æŠ€èƒ½ + æŠ€èƒ½æ³¨å†Œ + æŠ€èƒ½ä¼˜å…ˆçº§ + æŠ€èƒ½é“¾             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ¥å£å±‚ (Interfaces)                        â”‚
â”‚   IMessagePlatform + IControlBridge + IAIModel + IDatabase   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å®ç°å±‚ (Implementations)                    â”‚
â”‚     å¾®ä¿¡ + é£ä¹¦ + é’‰é’‰ + OpenAI + PostgreSQL + Redis         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ’¡ é€‰æ‹©æ‚¨çš„æ–¹æ¡ˆ

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ | é™åˆ¶ |
|------|----------|------|------|
| **ä¼ä¸šé€šä¿¡MCP** â­ | ä¼ä¸šå¾®ä¿¡/é£ä¹¦/é’‰é’‰ | âœ… ä¸éœ€è¦æ‰‹æœº<br>âœ… 100%å‡†ç¡®ç‡<br>âœ… Webç•Œé¢é…ç½®<br>âœ… å®˜æ–¹APIæ”¯æŒ | âš ï¸ ä»…æ”¯æŒä¼ä¸šé€šä¿¡å¹³å° |
| **ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ–** | ä¸ªäººå¾®ä¿¡ | âœ… æ”¯æŒä¸ªäººå¾®ä¿¡<br>âœ… OCRè¯†åˆ«æ¶ˆæ¯ | âš ï¸ éœ€è¦Androidæ‰‹æœº<br>âš ï¸ 70-90%å‡†ç¡®ç‡ |

---

## ğŸ¢ ä¼ä¸šé€šä¿¡MCP

### âš¡ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

```bash
# 1. è¿›å…¥MCPç›®å½•
cd enterprise_comm_mcp

# 2. å¤åˆ¶é…ç½®æ–‡ä»¶
cp config.yaml.example config.yaml

# 3. å¯åŠ¨æœåŠ¡
python mcp_server.py

# 4. æ‰“å¼€Webé…ç½®ç•Œé¢
æµè§ˆå™¨è®¿é—®: http://localhost:8000/static/config.html

# 5. åœ¨Webç•Œé¢é…ç½®å¹³å°å‚æ•°å¹¶æµ‹è¯•
```

### ğŸ“‹ æ”¯æŒçš„å¹³å°

#### ä¼ä¸šå¾®ä¿¡
- âœ… ç¾¤æœºå™¨äººï¼ˆWebhookï¼‰
- âœ… ä¼ä¸šåº”ç”¨ï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰
- ğŸ“š [é…ç½®æŒ‡å—](docs/WEWORK_BOT_GUIDE.md)

#### é£ä¹¦
- âœ… ç¾¤æœºå™¨äººï¼ˆWebhookï¼‰
- âœ… è‡ªå»ºåº”ç”¨ï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰
- ğŸ“š [å®˜æ–¹æ–‡æ¡£](https://open.feishu.cn/document/)

#### é’‰é’‰
- âœ… ç¾¤æœºå™¨äººï¼ˆWebhookï¼‰
- âœ… ä¼ä¸šå†…éƒ¨åº”ç”¨ï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰
- ğŸ“š [å®˜æ–¹æ–‡æ¡£](https://open.dingtalk.com/document/)

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

**é…ç½®ç®¡ç†**
```bash
# APIé…ç½®
curl -X POST http://localhost:8000/api/config/wework \
  -H 'Content-Type: application/json' \
  -d '{"enabled": true, "type": "webhook", "webhook_url": "..."}'

# è·å–é…ç½®
curl http://localhost:8000/api/config
```

**æ¶ˆæ¯å‘é€**
```bash
# å‘é€åˆ°ä¼ä¸šå¾®ä¿¡
curl -X POST http://localhost:8000/api/send/wework \
  -H 'Content-Type: application/json' \
  -d '{"content": "æµ‹è¯•æ¶ˆæ¯"}'

# å‘é€åˆ°é£ä¹¦
curl -X POST http://localhost:8000/api/send/feishu \
  -H 'Content-Type: application/json' \
  -d '{"content": "æµ‹è¯•æ¶ˆæ¯"}'
```

**Pythonè°ƒç”¨**
```python
import requests

# å‘é€æ¶ˆæ¯
response = requests.post(
    'http://localhost:8000/api/send/wework',
    json={'content': 'è‡ªåŠ¨å›å¤æ¶ˆæ¯'}
)

# æ›´æ–°é…ç½®
response = requests.post(
    'http://localhost:8000/api/config/feishu',
    json={
        'enabled': True,
        'type': 'webhook',
        'webhook_url': 'https://...'
    }
)
```

### ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹ï¼š[ä¼ä¸šé€šä¿¡MCPæŒ‡å—](ENTERPRISE_COMM_MCP_GUIDE.md)

---

## ğŸ“± ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ–

### å‰ç½®è¦æ±‚

- **Macç”µè„‘**: macOS 10.15+
- **å®‰å“æ‰‹æœº**: Android 7.0+ (æ¨èAndroid 15)
- **Python**: 3.12+
- **Docker**: ç”¨äºè¿è¡ŒPaddleOCRå®¹å™¨

### å¿«é€Ÿå®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/tianh-ai/OpenWechatAI-Core.git
cd OpenWechatAI-Core

# 2. å®‰è£…ä¾èµ–
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# 3. å¯åŠ¨Docker OCRæœåŠ¡
docker-compose up -d bidding_backend

# 4. è¿æ¥æ‰‹æœºå¹¶å¯åŠ¨
adb devices
python wechat_auto_reply.py --interval 3 --ocr --ocr-engine docker
```

è¯¦ç»†æ­¥éª¤: [æ‰‹æœºé…ç½®æŒ‡å—](docs/PHONE_SETUP.md)

---

## ğŸ“š æ–‡æ¡£ç›®å½•

### ä¼ä¸šé€šä¿¡MCP
| æ–‡æ¡£ | æè¿° |
|------|------|
| [ä¼ä¸šé€šä¿¡MCPæŒ‡å—](ENTERPRISE_COMM_MCP_GUIDE.md) | å®Œæ•´çš„ä½¿ç”¨æŒ‡å—å’Œå¯¹æ¯”è¯´æ˜ |
| [ä¼ä¸šå¾®ä¿¡æœºå™¨äºº](docs/WEWORK_BOT_GUIDE.md) | ä¼ä¸šå¾®ä¿¡é…ç½®è¯¦è§£ |
| [MCPæœåŠ¡å™¨æ–‡æ¡£](enterprise_comm_mcp/README.md) | APIæ–‡æ¡£å’Œéƒ¨ç½²è¯´æ˜ |
| [å¿«é€Ÿæµ‹è¯•è„šæœ¬](test_enterprise_mcp.py) | è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…· |

### ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ–

| æ–‡æ¡£ | æè¿° |
|------|------|
| [å¿«é€Ÿå¼€å§‹](QUICKSTART.md) | 30åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å— |
| [å®æ–½è§„åˆ’](IMPLEMENTATION_PLAN.md) | è¯¦ç»†çš„å¼€å‘å®æ–½è·¯çº¿å›¾ |
| [ä¼˜åŒ–æŒ‡å—](OPTIMIZATION_GUIDE.md) | æ¶æ„ä¼˜åŒ–å’Œæ€§èƒ½æå‡æ–¹æ¡ˆ |
| [å¼€å‘è·¯çº¿å›¾](ROADMAP.md) | ç‰ˆæœ¬è§„åˆ’å’ŒåŠŸèƒ½æ¼”è¿› |
| [é¡¹ç›®è§„åˆ’](PROJECT_PLAN.md) | åŸå§‹é¡¹ç›®è®¾è®¡æ–‡æ¡£ |

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºè‡ªåŠ¨å›å¤è§„åˆ™

ç¼–è¾‘ `rules/auto_reply.yaml`:

```yaml
- name: "æ™ºèƒ½å®¢æœ"
| æ–‡æ¡£ | æè¿° |
|------|------|
| [å¿«é€Ÿå¼€å§‹](QUICKSTART.md) | 30åˆ†é’Ÿä¸Šæ‰‹æŒ‡å— |
| [æ‰‹æœºé…ç½®](docs/PHONE_SETUP.md) | Androidæ‰‹æœºé…ç½®è¯¦è§£ |
| [å¾®ä¿¡è‡ªåŠ¨åŒ–](docs/WECHAT_AUTOMATION.md) | å¾®ä¿¡æ§åˆ¶è¯´æ˜ |
| [å®æ–½è§„åˆ’](IMPLEMENTATION_PLAN.md) | å¼€å‘è·¯çº¿å›¾ |
| [ä¼˜åŒ–æŒ‡å—](OPTIMIZATION_GUIDE.md) | æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ |

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ä¼ä¸šé€šä¿¡MCPç¤ºä¾‹

#### 1. Webç•Œé¢é…ç½®ï¼ˆæœ€ç®€å•ï¼‰

1. è®¿é—®é…ç½®é¡µé¢: `http://localhost:8000/static/config.html`
2. é€‰æ‹©å¹³å°ï¼ˆä¼ä¸šå¾®ä¿¡/é£ä¹¦/é’‰é’‰ï¼‰
3. å¡«å…¥Webhook URLæˆ–åº”ç”¨å‡­è¯
4. ç‚¹å‡»"ä¿å­˜é…ç½®"
5. ç‚¹å‡»"æµ‹è¯•å‘é€"éªŒè¯

#### 2. APIè°ƒç”¨ç¤ºä¾‹

```python
import requests

# ä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººæ¨é€
bot_config = {
    'enabled': True,
    'type': 'webhook',
    'webhook_url': 'https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx'
}
requests.post('http://localhost:8000/api/config/wework', json=bot_config)

# å‘é€æ¶ˆæ¯
requests.post(
    'http://localhost:8000/api/send/wework',
    json={'content': 'ğŸ“Š æ—¥æŠ¥ï¼šä»Šæ—¥è®¢å•é‡100å•'}
)

# é£ä¹¦åº”ç”¨æœºå™¨äºº
feishu_config = {
    'enabled': True,
    'type': 'app',
    'app_id': 'cli_xxx',
    'app_secret': 'your_secret'
}
requests.post('http://localhost:8000/api/config/feishu', json=feishu_config)

# å‘é€å¯Œæ–‡æœ¬æ¶ˆæ¯
requests.post(
    'http://localhost:8000/api/send/feishu',
    json={'content': '**é‡è¦é€šçŸ¥**\nè¯·åŠæ—¶å¤„ç†'}
)
```

#### 3. è‡ªåŠ¨å›å¤é…ç½®

ç¼–è¾‘ `config/reply_rules.yaml`:

```yaml
rules:
  - name: "å·¥ä½œæ—¶é—´è‡ªåŠ¨å›å¤"
    condition:
      type: time_range
      start_time: "09:00"
      end_time: "18:00"
    reply: "æ”¶åˆ°æ‚¨çš„æ¶ˆæ¯ï¼Œæˆ‘ä¼šå°½å¿«å›å¤"
  
  - name: "å…³é”®è¯å›å¤"
    condition:
      type: keyword
      keywords: ["ä»·æ ¼", "æŠ¥ä»·", "ä¼˜æƒ "]
    reply: "æ„Ÿè°¢å’¨è¯¢ï¼è¯·æŸ¥çœ‹æˆ‘ä»¬çš„æœ€æ–°ä»·æ ¼è¡¨: https://..."
  
  - name: "ä¼‘æ¯æ—¶é—´å›å¤"
    condition:
      type: time_range
      start_time: "22:00"
      end_time: "08:00"
    reply: "ç°åœ¨æ˜¯ä¼‘æ¯æ—¶é—´ï¼Œæ˜å¤©ä¼šå›å¤æ‚¨~"
```

### ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ–ç¤ºä¾‹

#### åˆ›å»ºè‡ªåŠ¨å›å¤è§„åˆ™50
  enabled: true
  if:
    platform: "WeChat"
    sender: "è€æ¿"
    content_contains: "ç´§æ€¥"
  then:
    action: "forward"
    target: "DingTalk"
    notify_channels: ["email", "sms"]
```

### åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½

```python
# skills/weather_skill.py
from skills.base_skill import BaseSkill
from interfaces.message_platform import IMessagePlatform
import httpx

class WeatherSkill(BaseSkill):
    """å¤©æ°”æŸ¥è¯¢æŠ€èƒ½"""
    
    @property
    def name(self) -> str:
        return "Weather Skill"
    
    def can_handle(self, message: dict) -> bool:
        content = message.get("content", "")
        return "å¤©æ°”" in content or "weather" in content.lower()
    
    async def execute(self, message: dict, platform: IMessagePlatform):
        sender = message.get("sender")
        # è°ƒç”¨å¤©æ°”APIè·å–æ•°æ®
        weather_data = await self._get_weather()
        reply = f"ä»Šå¤©å¤©æ°”: {weather_data}"
        platform.send_message(sender, reply)
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Python 3.11+**: ä¸»å¼€å‘è¯­è¨€
- **uiautomator2**: å®‰å“UIè‡ªåŠ¨åŒ–
- **FastAPI**: é«˜æ€§èƒ½Webæ¡†æ¶
- **Celery**: åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—
- **SQLAlchemy**: ORMæ¡†æ¶

### æ•°æ®å­˜å‚¨
- **PostgreSQL**: ä¸»æ•°æ®åº“
- **Redis**: ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—

### AIé›†æˆ
- **OpenAI GPT**: æ™ºèƒ½å¯¹è¯
- **Google Gemini**: å¤šæ¨¡æ€AI
- **Anthropic Claude**: é«˜çº§æ¨ç†

### ç›‘æ§è¿ç»´
- **Loguru**: æ—¥å¿—ç®¡ç†
- **Prometheus**: æŒ‡æ ‡æ”¶é›†
- **Grafana**: å¯è§†åŒ–ç›‘æ§
- **Sentry**: é”™è¯¯è¿½è¸ª

- **Python 3.12+**: ä¸»å¼€å‘è¯­è¨€
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **ADB**: Androidè°ƒè¯•æ¡¥

---

## ğŸ“Š é¡¹ç›®çŠ¶æ€

### å½“å‰ç‰ˆæœ¬: v1.0.0

| æ¨¡å— | çŠ¶æ€ | å®Œæˆåº¦ |
|------|------|--------|
| ä¼ä¸šé€šä¿¡MCP | âœ… ç¨³å®šç‰ˆ | 100% |
| - ä¼ä¸šå¾®ä¿¡æ”¯æŒ | âœ… å®Œæˆ | 100% |
| - é£ä¹¦æ”¯æŒ | âœ… å®Œæˆ | 100% |
| - é’‰é’‰æ”¯æŒ | âœ… å®Œæˆ | 100% |
| - Webé…ç½®ç•Œé¢ | âœ… å®Œæˆ | 100% |
| - APIæ¥å£ | âœ… å®Œæˆ | 100% |
| ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ– | âœ… ç¨³å®šç‰ˆ | 90% |
| - æ¶ˆæ¯æ£€æµ‹ | âœ… å®Œæˆ | 100% |
| - OCRè¯†åˆ« | âœ… å®Œæˆ | 95% |
| - è‡ªåŠ¨å›å¤ | âœ… å®Œæˆ | 90% |
| - è§„åˆ™å¼•æ“ | âœ… å®Œæˆ | 100% |
| AIé›†æˆ | ğŸ“‹ è®¡åˆ’ä¸­ | 30% |

### ç‰ˆæœ¬å†å²

- **v1.0.0** (2025-12-17) - ä¼ä¸šé€šä¿¡MCPæ­£å¼ç‰ˆå‘å¸ƒ
  - âœ… ä¼ä¸šå¾®ä¿¡ã€é£ä¹¦ã€é’‰é’‰ä¸‰å¤§å¹³å°å®Œæ•´æ”¯æŒ
  - âœ… Webå¯è§†åŒ–é…ç½®ç•Œé¢
  - âœ… ç»Ÿä¸€REST APIæ¥å£
  - âœ… è‡ªåŠ¨å›å¤è§„åˆ™å¼•æ“
  - âœ… å®Œæ•´æ–‡æ¡£å’Œç¤ºä¾‹

- **v0.9.0** (2025-12-16) - ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ–ç¨³å®šç‰ˆ
  - âœ… Android 15å®Œå…¨å…¼å®¹
  - âœ… Docker OCRé›†æˆ
  - âœ… è‡ªåŠ¨è¿›å…¥èŠå¤©åŠŸèƒ½
  - âœ… å¤šçº§è¾“å…¥å¤‡ç”¨æ–¹æ¡ˆ
  - âœ… å±å¹•ç®¡ç†ä¼˜åŒ–

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘ŠBugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼Œè¿˜æ˜¯æäº¤ä»£ç ï¼Œéƒ½éå¸¸æ„Ÿè°¢ï¼

### ğŸ“‹ è´¡çŒ®æ–¹å¼

- ğŸ› **æŠ¥å‘ŠBug**: [æäº¤BugæŠ¥å‘Š](https://github.com/tianh-ai/OpenWechatAI-Core/issues/new?template=bug_report.md)
- ğŸ’¡ **åŠŸèƒ½å»ºè®®**: [æäº¤åŠŸèƒ½è¯·æ±‚](https://github.com/tianh-ai/OpenWechatAI-Core/issues/new?template=feature_request.md)
- â“ **ä½¿ç”¨å’¨è¯¢**: [æé—®é¢˜](https://github.com/tianh-ai/OpenWechatAI-Core/issues/new?template=question.md)
- ğŸ’» **ä»£ç è´¡çŒ®**: [åˆ›å»ºPull Request](https://github.com/tianh-ai/OpenWechatAI-Core/pulls)
- ğŸ“š **æ–‡æ¡£æ”¹è¿›**: å¸®åŠ©å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹

### ğŸš€ å¿«é€Ÿå¼€å§‹è´¡çŒ®

1. **Fork æœ¬é¡¹ç›®**
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**
   ```bash
   git checkout -b feature/AmazingFeature
   # æˆ–
   git checkout -b fix/BugFix
   ```
3. **æäº¤æ›´æ”¹**
   ```bash
   git commit -m "feat: æ·»åŠ XXXåŠŸèƒ½"
   # æˆ–
   git commit -m "fix: ä¿®å¤XXXé—®é¢˜"
   ```
4. **æ¨é€åˆ°åˆ†æ”¯**
   ```bash
   git push origin feature/AmazingFeature
   ```
5. **å¼€å¯ Pull Request**

### ğŸ“ å¼€å‘è§„èŒƒ

- éµå¾ª [PEP 8](https://pep8.org/) ä»£ç é£æ ¼
- ä½¿ç”¨ [Black](https://github.com/psf/black) æ ¼å¼åŒ–ä»£ç 
- ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆç›®æ ‡è¦†ç›–ç‡ > 80%ï¼‰
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- æ›´æ–°ç›¸å…³æ–‡æ¡£å’Œç¤ºä¾‹

### ğŸ§ª æµ‹è¯•è¦æ±‚

```bash
# è¿è¡Œæµ‹è¯•
pytest tests/

# æŸ¥çœ‹è¦†ç›–ç‡
pytest --cov=. tests/

# æ ¼å¼åŒ–ä»£ç 
black .

# æ£€æŸ¥ä»£ç é£æ ¼
flake8 .
```

### ğŸ“š æ›´å¤šä¿¡æ¯

è¯¦ç»†çš„è´¡çŒ®æŒ‡å—è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md)

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

æ‚¨å¯ä»¥è‡ªç”±åœ°ï¼š
- âœ… ä½¿ç”¨æœ¬é¡¹ç›®ç”¨äºå•†ä¸šæˆ–éå•†ä¸šç”¨é€”
- âœ… ä¿®æ”¹å’Œåˆ†å‘æœ¬é¡¹ç›®
- âœ… åœ¨æ‚¨çš„é¡¹ç›®ä¸­é›†æˆæœ¬é¡¹ç›®

æ¡ä»¶ï¼š
- ğŸ“‹ ä¿ç•™ç‰ˆæƒå£°æ˜å’Œè®¸å¯è¯å£°æ˜
- ğŸš« ä¸æä¾›ä»»ä½•æ‹…ä¿

---

## ğŸ™ è‡´è°¢

### æ ¸å¿ƒæŠ€æœ¯

æ„Ÿè°¢ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®å’ŒæŠ€æœ¯ï¼š

#### ä¼ä¸šé€šä¿¡MCP
- [Flask](https://flask.palletsprojects.com/) - å¼ºå¤§çš„Python Webæ¡†æ¶
- [ä¼ä¸šå¾®ä¿¡API](https://developer.work.weixin.qq.com/) - ä¼ä¸šå¾®ä¿¡å®˜æ–¹API
- [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/) - é£ä¹¦å®˜æ–¹å¼€æ”¾å¹³å°
- [é’‰é’‰å¼€æ”¾å¹³å°](https://open.dingtalk.com/) - é’‰é’‰å®˜æ–¹å¼€æ”¾å¹³å°

#### ä¸ªäººå¾®ä¿¡è‡ªåŠ¨åŒ–
- [uiautomator2](https://github.com/openatx/uiautomator2) - Android UIè‡ªåŠ¨åŒ–æ¡†æ¶
- [PaddleOCR](https://github.com/PaddlePaddle/PaddleOCR) - ç™¾åº¦å¼€æºOCRå¼•æ“
- [imagehash](https://github.com/JohannesBuchner/imagehash) - å›¾åƒå“ˆå¸Œåº“

#### å¼€å‘å·¥å…·
- [pytest](https://pytest.org/) - Pythonæµ‹è¯•æ¡†æ¶
- [black](https://github.com/psf/black) - Pythonä»£ç æ ¼å¼åŒ–å·¥å…·
- [flake8](https://flake8.pycqa.org/) - Pythonä»£ç æ£€æŸ¥å·¥å…·

### è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„äººï¼

<a href="https://github.com/tianh-ai/OpenWechatAI-Core/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=tianh-ai/OpenWechatAI-Core" />
</a>

### ç‰¹åˆ«æ„Ÿè°¢

- ğŸ¯ æ‰€æœ‰æå‡ºå®è´µå»ºè®®å’Œåé¦ˆçš„ç”¨æˆ·
- ğŸ› æ‰€æœ‰æäº¤BugæŠ¥å‘Šçš„ç”¨æˆ·
- ğŸ’» æ‰€æœ‰è´¡çŒ®ä»£ç çš„å¼€å‘è€…
- ğŸ“š æ‰€æœ‰å®Œå–„æ–‡æ¡£çš„è´¡çŒ®è€…
- â­ æ‰€æœ‰ç»™äºˆStaræ”¯æŒçš„æœ‹å‹

ä½ ä»¬çš„æ”¯æŒæ˜¯è¿™ä¸ªé¡¹ç›®æŒç»­å‘å±•çš„åŠ¨åŠ›ï¼â¤ï¸

---

## ğŸ“ è”ç³»æˆ‘ä»¬

### ç¤¾åŒºæ”¯æŒ

- ğŸ’¬ **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/tianh-ai/OpenWechatAI-Core/issues)
- ğŸ’¡ **åŠŸèƒ½å»ºè®®**: [Feature Requests](https://github.com/tianh-ai/OpenWechatAI-Core/issues/new?template=feature_request.md)
- ğŸ› **BugæŠ¥å‘Š**: [Bug Reports](https://github.com/tianh-ai/OpenWechatAI-Core/issues/new?template=bug_report.md)
- ğŸ’­ **è®¨è®ºåŒº**: [GitHub Discussions](https://github.com/tianh-ai/OpenWechatAI-Core/discussions)

### é¡¹ç›®èµ„æº

- ğŸ  **é¡¹ç›®ä¸»é¡µ**: https://github.com/tianh-ai/OpenWechatAI-Core
- ğŸ“– **æ–‡æ¡£ä¸­å¿ƒ**: [å®Œæ•´æ–‡æ¡£](https://github.com/tianh-ai/OpenWechatAI-Core#-æ–‡æ¡£)
- ğŸš€ **å¿«é€Ÿå¼€å§‹**: [5åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—](https://github.com/tianh-ai/OpenWechatAI-Core#-å¿«é€Ÿå¼€å§‹)
- ğŸ“¦ **Release**: [ç‰ˆæœ¬å‘å¸ƒ](https://github.com/tianh-ai/OpenWechatAI-Core/releases)

### è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜ï¼Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å¸®åŠ©ï¼š

1. ğŸ“š æŸ¥é˜…[æ–‡æ¡£](https://github.com/tianh-ai/OpenWechatAI-Core#-æ–‡æ¡£)å’Œ[ç¤ºä¾‹ä»£ç ](examples/)
2. ğŸ” æœç´¢[å·²æœ‰Issues](https://github.com/tianh-ai/OpenWechatAI-Core/issues)
3. ğŸ’¬ åœ¨[Discussions](https://github.com/tianh-ai/OpenWechatAI-Core/discussions)æé—®
4. ğŸ› å¦‚æœæ˜¯Bugï¼Œè¯·[åˆ›å»ºIssue](https://github.com/tianh-ai/OpenWechatAI-Core/issues/new?template=bug_report.md)

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

<div align="center">

![GitHub stars](https://img.shields.io/github/stars/tianh-ai/OpenWechatAI-Core?style=social)
![GitHub forks](https://img.shields.io/github/forks/tianh-ai/OpenWechatAI-Core?style=social)
![GitHub watchers](https://img.shields.io/github/watchers/tianh-ai/OpenWechatAI-Core?style=social)

![GitHub issues](https://img.shields.io/github/issues/tianh-ai/OpenWechatAI-Core)
![GitHub pull requests](https://img.shields.io/github/issues-pr/tianh-ai/OpenWechatAI-Core)
![GitHub last commit](https://img.shields.io/github/last-commit/tianh-ai/OpenWechatAI-Core)
![GitHub contributors](https://img.shields.io/github/contributors/tianh-ai/OpenWechatAI-Core)

</div>

---

<div align="center">

### â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼â­

**è®©ä¼ä¸šé€šä¿¡è‡ªåŠ¨åŒ–å˜å¾—ç®€å•è€Œå¼ºå¤§**

Made with â¤ï¸ by [OpenWechatAI Team](https://github.com/tianh-ai)

[â¬† å›åˆ°é¡¶éƒ¨](#openwechatai-core)

</div>
