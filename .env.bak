# 环境变量配置模板
# 复制此文件为 .env 并填入实际值

# ==================== 环境配置 ====================
ENVIRONMENT=development  # development, staging, production
DEBUG=true

# ==================== 端口配置 ====================
# 注意：如果系统端口被占用，请修改这些端口
# 参考文档：docs/PORT_CONFIG.md
POSTGRES_PORT=5433  # PostgreSQL端口（默认5432已被占用，改用5433）
REDIS_PORT=6380     # Redis端口（默认6379可用，但使用备用端口避免未来冲突）
API_PORT=8001       # API服务端口（默认8000已被占用，改用8001）
MCP_PORT=3000       # MCP服务端口（可用）

# ==================== 数据库配置 ====================
# 使用MCP外部数据库服务（替代直接数据库连接）
MCP_DATABASE_ENDPOINT=http://localhost:3000/mcp
MCP_DATABASE_API_KEY=your_mcp_api_key_here
MCP_DATABASE_TIMEOUT=30

# 传统数据库配置（已弃用，使用MCP服务）
# DATABASE_URL=postgresql://wechat:your_password@localhost:5432/openwechatai
# DB_POOL_SIZE=10
# DB_MAX_OVERFLOW=20

# ==================== Redis配置 ====================
REDIS_URL=redis://localhost:${REDIS_PORT:-6380}/0
REDIS_MAX_CONNECTIONS=50

# ==================== Celery配置 ====================
CELERY_BROKER_URL=redis://localhost:${REDIS_PORT:-6380}/1
CELERY_RESULT_BACKEND=redis://localhost:${REDIS_PORT:-6380}/2

# ==================== AI模型配置 ====================
# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_BASE_URL=https://api.openai.com/v1  # 可选，自定义API地址

# Google Gemini
GEMINI_API_KEY=your-gemini-api-key
GEMINI_MODEL=gemini-pro

# Anthropic Claude
ANTHROPIC_API_KEY=your-anthropic-api-key
CLAUDE_MODEL=claude-3-opus-20240229

# ==================== 平台集成 ====================
# 飞书
FEISHU_APP_ID=your-feishu-app-id
FEISHU_APP_SECRET=your-feishu-app-secret

# 钉钉
DINGTALK_APP_KEY=your-dingtalk-app-key
DINGTALK_APP_SECRET=your-dingtalk-app-secret

# 企业微信
WORK_WECHAT_CORP_ID=your-corp-id
WORK_WECHAT_AGENT_ID=your-agent-id
WORK_WECHAT_SECRET=your-secret

# ==================== 安全配置 ====================
SECRET_KEY=your-very-secure-random-secret-key-min-32-chars
ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com

# JWT配置
JWT_SECRET_KEY=your-jwt-secret-key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==================== 日志配置 ====================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=logs/app.log
LOG_ROTATION=500 MB
LOG_RETENTION=30 days

# ==================== 监控配置 ====================
# Sentry错误追踪
SENTRY_DSN=your-sentry-dsn-url
SENTRY_ENVIRONMENT=development

# Prometheus
ENABLE_METRICS=true
METRICS_PORT=9090

# ==================== 手机控制配置 ====================
ANDROID_DEVICE_SERIAL=your-device-serial  # 留空则自动检测第一个设备
WECHAT_PACKAGE_NAME=com.tencent.mm

# UI自动化配置
UI_AUTOMATION_TIMEOUT=10  # 秒
UI_AUTOMATION_RETRY=3

# ==================== API服务配置 ====================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false  # 生产环境设为false

# CORS配置
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ==================== 文件存储配置 ====================
# 本地存储
STORAGE_TYPE=local  # local, s3, oss
UPLOAD_DIR=uploads

# S3配置（如使用云存储）
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_BUCKET_NAME=your-bucket
# AWS_REGION=us-west-2

# ==================== 任务配置 ====================
# Celery Worker
CELERY_CONCURRENCY=4
CELERY_MAX_TASKS_PER_CHILD=100

# 任务重试
TASK_MAX_RETRIES=3
TASK_RETRY_DELAY=60  # 秒

# ==================== 业务配置 ====================
# 消息处理
MESSAGE_POLLING_INTERVAL=10  # 秒
MAX_MESSAGES_PER_POLL=50

# AI对话
AI_CONTEXT_MAX_TURNS=10
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=1000

# 自动回复
AUTO_REPLY_ENABLED=true
AUTO_REPLY_DELAY_MIN=1  # 秒
AUTO_REPLY_DELAY_MAX=3

# ==================== 功能开关 ====================
ENABLE_AUTO_REPLY=true
ENABLE_AI_CHAT=true
ENABLE_FORWARD=true
ENABLE_OCR=false
ENABLE_VOICE_RECOGNITION=false

# ==================== 开发工具 ====================
# 调试
SQLALCHEMY_ECHO=false  # 生产环境必须false
SHOW_STACK_TRACE=true

# 测试
TEST_DATABASE_URL=postgresql://wechat:test@localhost:5432/openwechatai_test
